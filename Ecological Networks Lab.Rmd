---
title: "Ecological Networks Lab"
output: html_document
date: '2022-12-08'
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Ecological Networks Lab

By: Sophia Simon, Daniel Valencia, Kayla Hale, Isidora Avila-Thieme

Oceans are facing a crisis worldwide, with fish stocks and marine ecosystems collapsing due to anthropogenic stressors including fisheries exploitation and climate change. The field of ecological networks can contribute to understanding how the perturbations caused by those stressors propagate through marine ecosystems by analyzing the structure and dynamics of networks of species interactions.

### Part 1 - Introduction to networks approach & basic concepts. What types of questions can be solved using these tools?

```{r Load packages and visualize data}

#install the R package "NetworkExtinction"

#load packages
library("NetworkExtinction")
library("ggplot2")
library("network")

#load chilean intertidal network
data("chilean_intertidal")

#code to convert between matrix and network formats
intertidal_matrix <- as.matrix(chilean_intertidal)
intertidal_network <- as.network(chilean_intertidal)

#rownames(chilean_intertidal) <- colnames(chilean_intertidal)

```

Below are important definitions relevant to the NetworkExtinction R package workflows (NextR package preprint, Valdovinos 2019 Box 1). Read through these definitions and complete Exercise 1.1, where you define and calculate these metrics for the Chilean Intertidal Network.

**Interaction Type** - a link between two nodes reflecting the type of relationship involved. NetworkExtinction handles mutualistic (+/+) and trophic / parasitic (-/+) interaction types. For a more exhaustive overview of interaction types, consult Morales-Castilla et al. (2015).

**Species Richness (S)** -- Total number of species in the network.

**Connectance (C)** -- Fraction of potential interactions that are realized, C=L/S, where L is the total number of realized interactions (links connecting species)

**Degree** - The number of links that connects a single node to the rest of the networks. Total degree includes in-degrees and out-degrees

**Degree Distribution** -- The probability distribution that a node in the network is connected to k other nodes (Estrada, 2007). The `DegreeDistribution()` function calculates the cumulative distribution of the number of links that each species in the food network has (Estrada 2007). Then, the observed distribution is fitted to the exponential, and power law models.

```{r Calculating important metrics}

DegreeDistribution(chilean_intertidal,scale="arithmetic")
```

Reflection: How do you hypothesize that networks with power law vs exponential degree distributions might respond differently to the removal/extinction of most-connected nodes?

Answer: Networks that follow a power law distribution are very vulnerable to the removal of the most connected nodes, while networks that follow exponential degree distribution are less vulnerable to the removal of the most connected nodes (Albert and Barabási 2002; Dunne, Williams, and Martinez 2002; Estrada 2007; Santana et al. 2013).

---

**Interaction strength** - The direct effect that nodes have on each other's demography (Morales-Castilla et al., 2015), fitness (de Santiago-Hernández et al., 2019), or resource acquisition/transfer of energy (Heymans et al., 2016). NetworkExtinction implicitly treats interaction strength as the effect that nodes have on each other's persistence.

**Network Robustness** - A measure of the maintenance of network structure in the face of perturbations and quantified here as the number of species (nodes) lost as a consequence of primary species extinctions. **Extinction Threshold** - NetworkExtinction treats an extinction threshold as a percentage of interaction strength loss (relative to the total interaction strength at onset of extinction simulation) which a vertex may loose before becoming secondarily extinct (Schleuning et al., 2016). **Rewiring capability** - Rewiring is the process by which a vertex may allocate interaction strength linked to a link which is removed due to a loss of interaction partner to an entirely new or already linked partner thereby increasing the interaction strength of new or already existing links in a network (Frund, 2021; Schleuning ¨ et al., 2016; Staniczenko et al., 2010).

```{r}

```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.

### Part 2. Examples & Interpretation

#### Exercise 2.1

Exercise 2.2

Exercise 2.3 Effect of targeted extinctions

Primary producers, due to low nutrient subsidy

Mollusks, due to ocean acidification

### Part 3. Independent work

### Part 4. Synthesis & Reflection

#### Reflection 4.1

Reflect on the connection between labs 1 & 2 --- this means directly thinking about the effects of physical oceanographic variables like ocean currents, temperature, salinity, etc. on ecological variables like recruitment, life history, dispersal, species interactions, etc.

One example of an the oceanographic phenomenon that occurs on the coast of Chile and California is upwelling. Upwelling is the wind-driven movement of cold, nutrient-rich water from the ocean depth to its surface, replacing the warm and nutrient-depleted water near the surface. This upward flux of waters results in a persistent supply of nutrients that fuels photosynthesis and accounts for high levels of productivity.

Question 1: Take a moment to hypothesize about the effects of upwelling on ecological variables. Which ecological variables would you expect to be impacted the most, and how might that change propagate through the ecological network?

Question 2: Brainstorm other examples of oceanographic phenomena that may impact ecological variables. How do you hypothesize that climate change may alter this oceanographic phenomenon and how might that change propagate through the ecological network?

#### Reflection 4.2
